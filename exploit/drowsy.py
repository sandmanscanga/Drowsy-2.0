from bs4 import BeautifulSoup
import requests
import json

URL = "http://localhost:18001/search-post"


def extract_forms(html):
    soup = BeautifulSoup(html, "lxml")
    for form in soup.findAll("form"):
        fields = []
        for field in form.findAll():
            name = field.attrs.get("name")
            value = field.attrs.get("value")
            if name is not None:
                fields.append((name, value))
        yield dict(fields)


def main():
    r = requests.get(URL)
    for form in extract_forms(r.text):
        # print(json.dumps(form))
        print(form)


if __name__ == "__main__":
    main()
